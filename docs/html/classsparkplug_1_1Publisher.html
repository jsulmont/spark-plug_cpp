<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sparkplug B C++ Library: sparkplug::Publisher Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Sparkplug B C++ Library<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">Modern C++23 implementation of Eclipse Sparkplug B 2.2 specification</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('classsparkplug_1_1Publisher.html','','classsparkplug_1_1Publisher-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">sparkplug::Publisher Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Sparkplug B edge node publisher implementing the complete message lifecycle.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="publisher_8hpp_source.html">publisher.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:Config" id="r_Config"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsparkplug_1_1Publisher_1_1Config.html">Config</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configuration parameters for the Sparkplug B publisher.  <a href="structsparkplug_1_1Publisher_1_1Config.html#details">More...</a><br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a859fb8cc24cb969dff641d38c899c6af" id="r_a859fb8cc24cb969dff641d38c899c6af"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a859fb8cc24cb969dff641d38c899c6af">Publisher</a> (<a class="el" href="structsparkplug_1_1Publisher_1_1Config.html">Config</a> config)</td></tr>
<tr class="memdesc:a859fb8cc24cb969dff641d38c899c6af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a <a class="el" href="classsparkplug_1_1Publisher.html" title="Sparkplug B edge node publisher implementing the complete message lifecycle.">Publisher</a> with the given configuration.  <br /></td></tr>
<tr class="memitem:a2d42d4ef522e0dd25c33bb0c6da3954a" id="r_a2d42d4ef522e0dd25c33bb0c6da3954a"><td class="memItemLeft" align="right" valign="top"><a id="a2d42d4ef522e0dd25c33bb0c6da3954a" name="a2d42d4ef522e0dd25c33bb0c6da3954a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>~Publisher</b> ()</td></tr>
<tr class="memdesc:a2d42d4ef522e0dd25c33bb0c6da3954a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys the <a class="el" href="classsparkplug_1_1Publisher.html" title="Sparkplug B edge node publisher implementing the complete message lifecycle.">Publisher</a> and cleans up MQTT resources. <br /></td></tr>
<tr class="memitem:a8bb99912a8acf5c96d49390bb220e411" id="r_a8bb99912a8acf5c96d49390bb220e411"><td class="memItemLeft" align="right" valign="top"><a id="a8bb99912a8acf5c96d49390bb220e411" name="a8bb99912a8acf5c96d49390bb220e411"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Publisher</b> (const <a class="el" href="classsparkplug_1_1Publisher.html">Publisher</a> &amp;)=delete</td></tr>
<tr class="memitem:a8805c7505081336ca5d092c9acf6e7da" id="r_a8805c7505081336ca5d092c9acf6e7da"><td class="memItemLeft" align="right" valign="top"><a id="a8805c7505081336ca5d092c9acf6e7da" name="a8805c7505081336ca5d092c9acf6e7da"></a>
<a class="el" href="classsparkplug_1_1Publisher.html">Publisher</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classsparkplug_1_1Publisher.html">Publisher</a> &amp;)=delete</td></tr>
<tr class="memitem:ae7733c522d3ecf75e85bd1ff011eecb3" id="r_ae7733c522d3ecf75e85bd1ff011eecb3"><td class="memItemLeft" align="right" valign="top"><a id="ae7733c522d3ecf75e85bd1ff011eecb3" name="ae7733c522d3ecf75e85bd1ff011eecb3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Publisher</b> (<a class="el" href="classsparkplug_1_1Publisher.html">Publisher</a> &amp;&amp;) noexcept</td></tr>
<tr class="memitem:a4d8cc465c1c43db384bd7342975fccfb" id="r_a4d8cc465c1c43db384bd7342975fccfb"><td class="memItemLeft" align="right" valign="top"><a id="a4d8cc465c1c43db384bd7342975fccfb" name="a4d8cc465c1c43db384bd7342975fccfb"></a>
<a class="el" href="classsparkplug_1_1Publisher.html">Publisher</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="classsparkplug_1_1Publisher.html">Publisher</a> &amp;&amp;) noexcept</td></tr>
<tr class="memitem:aff87312f24cdd8f7da406950c47b30c8" id="r_aff87312f24cdd8f7da406950c47b30c8"><td class="memItemLeft" align="right" valign="top">std::expected&lt; void, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aff87312f24cdd8f7da406950c47b30c8">connect</a> ()</td></tr>
<tr class="memdesc:aff87312f24cdd8f7da406950c47b30c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connects to the MQTT broker and establishes a Sparkplug B session.  <br /></td></tr>
<tr class="memitem:af5288a5b142ac22437df461507a43869" id="r_af5288a5b142ac22437df461507a43869"><td class="memItemLeft" align="right" valign="top">std::expected&lt; void, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af5288a5b142ac22437df461507a43869">disconnect</a> ()</td></tr>
<tr class="memdesc:af5288a5b142ac22437df461507a43869"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gracefully disconnects from the MQTT broker.  <br /></td></tr>
<tr class="memitem:ab74f5e1e2e561c0b36c84f2084e70189" id="r_ab74f5e1e2e561c0b36c84f2084e70189"><td class="memItemLeft" align="right" valign="top">std::expected&lt; void, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab74f5e1e2e561c0b36c84f2084e70189">publish_birth</a> (<a class="el" href="classsparkplug_1_1PayloadBuilder.html">PayloadBuilder</a> &amp;payload)</td></tr>
<tr class="memdesc:ab74f5e1e2e561c0b36c84f2084e70189"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publishes an NBIRTH (Node Birth) message.  <br /></td></tr>
<tr class="memitem:a9586b21b626d923791b20c8b3984ef3f" id="r_a9586b21b626d923791b20c8b3984ef3f"><td class="memItemLeft" align="right" valign="top">std::expected&lt; void, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9586b21b626d923791b20c8b3984ef3f">publish_data</a> (<a class="el" href="classsparkplug_1_1PayloadBuilder.html">PayloadBuilder</a> &amp;payload)</td></tr>
<tr class="memdesc:a9586b21b626d923791b20c8b3984ef3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publishes an NDATA (Node Data) message.  <br /></td></tr>
<tr class="memitem:aa6cf8827815c965085ffe4b93a295be5" id="r_aa6cf8827815c965085ffe4b93a295be5"><td class="memItemLeft" align="right" valign="top">std::expected&lt; void, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa6cf8827815c965085ffe4b93a295be5">publish_death</a> ()</td></tr>
<tr class="memdesc:aa6cf8827815c965085ffe4b93a295be5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publishes an NDEATH (Node Death) message.  <br /></td></tr>
<tr class="memitem:aff750fe0cc21d2ce83fa72fadac7d974" id="r_aff750fe0cc21d2ce83fa72fadac7d974"><td class="memItemLeft" align="right" valign="top">std::expected&lt; void, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aff750fe0cc21d2ce83fa72fadac7d974">rebirth</a> ()</td></tr>
<tr class="memdesc:aff750fe0cc21d2ce83fa72fadac7d974"><td class="mdescLeft">&#160;</td><td class="mdescRight">Triggers a rebirth by publishing a new NBIRTH with incremented bdSeq.  <br /></td></tr>
<tr class="memitem:a4ca8479c7841eca61b7f472d85421550" id="r_a4ca8479c7841eca61b7f472d85421550"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4ca8479c7841eca61b7f472d85421550">get_seq</a> () const</td></tr>
<tr class="memdesc:a4ca8479c7841eca61b7f472d85421550"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the current message sequence number.  <br /></td></tr>
<tr class="memitem:a83b86ae882230d92043fe0430744d5ec" id="r_a83b86ae882230d92043fe0430744d5ec"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a83b86ae882230d92043fe0430744d5ec">get_bd_seq</a> () const</td></tr>
<tr class="memdesc:a83b86ae882230d92043fe0430744d5ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the current birth/death sequence number.  <br /></td></tr>
<tr class="memitem:a86649a7a700810380140581ef5f0bfaa" id="r_a86649a7a700810380140581ef5f0bfaa"><td class="memItemLeft" align="right" valign="top">std::expected&lt; void, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a86649a7a700810380140581ef5f0bfaa">publish_device_birth</a> (std::string_view device_id, <a class="el" href="classsparkplug_1_1PayloadBuilder.html">PayloadBuilder</a> &amp;payload)</td></tr>
<tr class="memdesc:a86649a7a700810380140581ef5f0bfaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publishes a DBIRTH (Device Birth) message.  <br /></td></tr>
<tr class="memitem:a06464584de49d45cdcd2bd61f196481e" id="r_a06464584de49d45cdcd2bd61f196481e"><td class="memItemLeft" align="right" valign="top">std::expected&lt; void, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a06464584de49d45cdcd2bd61f196481e">publish_device_data</a> (std::string_view device_id, <a class="el" href="classsparkplug_1_1PayloadBuilder.html">PayloadBuilder</a> &amp;payload)</td></tr>
<tr class="memdesc:a06464584de49d45cdcd2bd61f196481e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publishes a DDATA (Device Data) message.  <br /></td></tr>
<tr class="memitem:a9fdd7b0b127c2512f124132c16df8d44" id="r_a9fdd7b0b127c2512f124132c16df8d44"><td class="memItemLeft" align="right" valign="top">std::expected&lt; void, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9fdd7b0b127c2512f124132c16df8d44">publish_device_death</a> (std::string_view device_id)</td></tr>
<tr class="memdesc:a9fdd7b0b127c2512f124132c16df8d44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publishes a DDEATH (Device Death) message.  <br /></td></tr>
<tr class="memitem:ae7a38f82822231d5b997c6e238882f75" id="r_ae7a38f82822231d5b997c6e238882f75"><td class="memItemLeft" align="right" valign="top">std::expected&lt; void, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae7a38f82822231d5b997c6e238882f75">publish_node_command</a> (std::string_view target_edge_node_id, <a class="el" href="classsparkplug_1_1PayloadBuilder.html">PayloadBuilder</a> &amp;payload)</td></tr>
<tr class="memdesc:ae7a38f82822231d5b997c6e238882f75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publishes an NCMD (Node Command) message to another edge node.  <br /></td></tr>
<tr class="memitem:a5918a8a1d0f6783db3dd8d152579aee2" id="r_a5918a8a1d0f6783db3dd8d152579aee2"><td class="memItemLeft" align="right" valign="top">std::expected&lt; void, std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5918a8a1d0f6783db3dd8d152579aee2">publish_device_command</a> (std::string_view target_edge_node_id, std::string_view target_device_id, <a class="el" href="classsparkplug_1_1PayloadBuilder.html">PayloadBuilder</a> &amp;payload)</td></tr>
<tr class="memdesc:a5918a8a1d0f6783db3dd8d152579aee2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publishes a DCMD (Device Command) message to a device on another edge node.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Sparkplug B edge node publisher implementing the complete message lifecycle. </p>
<p>The <a class="el" href="classsparkplug_1_1Publisher.html" title="Sparkplug B edge node publisher implementing the complete message lifecycle.">Publisher</a> class manages the full Sparkplug B protocol for an edge node:</p><ul>
<li>NBIRTH: Initial birth certificate with all metrics and aliases</li>
<li>NDATA: Subsequent data updates using aliases for bandwidth efficiency</li>
<li>NDEATH: Death certificate (sent via MQTT Last Will Testament)</li>
<li>Automatic sequence number management (0-255, wraps at 256)</li>
<li>Birth/Death sequence (bdSeq) tracking for session management</li>
</ul>
<dl class="section user"><dt>Thread Safety</dt><dd>This class is NOT thread-safe. All methods must be called from the same thread.</dd></dl>
<dl class="section user"><dt>Example Usage</dt><dd><div class="fragment"><div class="line"><a class="code hl_struct" href="structsparkplug_1_1Publisher_1_1Config.html">sparkplug::Publisher::Config</a> config{</div>
<div class="line">  .broker_url = <span class="stringliteral">&quot;tcp://localhost:1883&quot;</span>,</div>
<div class="line">  .client_id = <span class="stringliteral">&quot;my_edge_node&quot;</span>,</div>
<div class="line">  .group_id = <span class="stringliteral">&quot;Energy&quot;</span>,</div>
<div class="line">  .edge_node_id = <span class="stringliteral">&quot;Gateway01&quot;</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="classsparkplug_1_1Publisher.html">sparkplug::Publisher</a> publisher(std::move(config));</div>
<div class="line">publisher.connect();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Publish NBIRTH (required first message)</span></div>
<div class="line"><a class="code hl_class" href="classsparkplug_1_1PayloadBuilder.html">sparkplug::PayloadBuilder</a> birth;</div>
<div class="line">birth.<a class="code hl_function" href="classsparkplug_1_1PayloadBuilder.html#a676ca0d9675d16485b7bbd4f5dbfffa7">add_metric_with_alias</a>(<span class="stringliteral">&quot;Temperature&quot;</span>, 1, 20.5);</div>
<div class="line">publisher.publish_birth(birth);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Publish NDATA updates</span></div>
<div class="line"><a class="code hl_class" href="classsparkplug_1_1PayloadBuilder.html">sparkplug::PayloadBuilder</a> data;</div>
<div class="line">data.<a class="code hl_function" href="classsparkplug_1_1PayloadBuilder.html#a0cb1f70cd4587d1da66d9ff8b3fe1581">add_metric_by_alias</a>(1, 21.0);  <span class="comment">// Temperature changed</span></div>
<div class="line">publisher.publish_data(data);</div>
<div class="line"> </div>
<div class="line">publisher.disconnect();  <span class="comment">// Sends NDEATH automatically</span></div>
<div class="ttc" id="aclasssparkplug_1_1PayloadBuilder_html"><div class="ttname"><a href="classsparkplug_1_1PayloadBuilder.html">sparkplug::PayloadBuilder</a></div><div class="ttdoc">Type-safe builder for Sparkplug B payloads with automatic type detection.</div><div class="ttdef"><b>Definition</b> <a href="payload__builder_8hpp_source.html#l00136">payload_builder.hpp:136</a></div></div>
<div class="ttc" id="aclasssparkplug_1_1PayloadBuilder_html_a0cb1f70cd4587d1da66d9ff8b3fe1581"><div class="ttname"><a href="classsparkplug_1_1PayloadBuilder.html#a0cb1f70cd4587d1da66d9ff8b3fe1581">sparkplug::PayloadBuilder::add_metric_by_alias</a></div><div class="ttdeci">PayloadBuilder &amp; add_metric_by_alias(uint64_t alias, T &amp;&amp;value)</div><div class="ttdoc">Adds a metric by alias only (for NDATA messages).</div><div class="ttdef"><b>Definition</b> <a href="payload__builder_8hpp_source.html#l00211">payload_builder.hpp:211</a></div></div>
<div class="ttc" id="aclasssparkplug_1_1PayloadBuilder_html_a676ca0d9675d16485b7bbd4f5dbfffa7"><div class="ttname"><a href="classsparkplug_1_1PayloadBuilder.html#a676ca0d9675d16485b7bbd4f5dbfffa7">sparkplug::PayloadBuilder::add_metric_with_alias</a></div><div class="ttdeci">PayloadBuilder &amp; add_metric_with_alias(std::string_view name, uint64_t alias, T &amp;&amp;value)</div><div class="ttdoc">Adds a metric with both name and alias (for NBIRTH messages).</div><div class="ttdef"><b>Definition</b> <a href="payload__builder_8hpp_source.html#l00193">payload_builder.hpp:193</a></div></div>
<div class="ttc" id="aclasssparkplug_1_1Publisher_html"><div class="ttname"><a href="classsparkplug_1_1Publisher.html">sparkplug::Publisher</a></div><div class="ttdoc">Sparkplug B edge node publisher implementing the complete message lifecycle.</div><div class="ttdef"><b>Definition</b> <a href="publisher_8hpp_source.html#l00058">publisher.hpp:58</a></div></div>
<div class="ttc" id="astructsparkplug_1_1Publisher_1_1Config_html"><div class="ttname"><a href="structsparkplug_1_1Publisher_1_1Config.html">sparkplug::Publisher::Config</a></div><div class="ttdoc">Configuration parameters for the Sparkplug B publisher.</div><div class="ttdef"><b>Definition</b> <a href="publisher_8hpp_source.html#l00063">publisher.hpp:63</a></div></div>
</div><!-- fragment --></dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classsparkplug_1_1PayloadBuilder.html" title="Type-safe builder for Sparkplug B payloads with automatic type detection.">PayloadBuilder</a> for constructing metric payloads </dd>
<dd>
<a class="el" href="classsparkplug_1_1Subscriber.html" title="Sparkplug B subscriber for consuming edge node messages with validation.">Subscriber</a> for consuming Sparkplug B messages </dd></dl>

<p class="definition">Definition at line <a class="el" href="publisher_8hpp_source.html#l00058">58</a> of file <a class="el" href="publisher_8hpp_source.html">publisher.hpp</a>.</p>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a859fb8cc24cb969dff641d38c899c6af" name="a859fb8cc24cb969dff641d38c899c6af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a859fb8cc24cb969dff641d38c899c6af">&#9670;&#160;</a></span>Publisher()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sparkplug::Publisher::Publisher </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structsparkplug_1_1Publisher_1_1Config.html">Config</a></td>          <td class="paramname"><span class="paramname"><em>config</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs a <a class="el" href="classsparkplug_1_1Publisher.html" title="Sparkplug B edge node publisher implementing the complete message lifecycle.">Publisher</a> with the given configuration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td><a class="el" href="classsparkplug_1_1Publisher.html" title="Sparkplug B edge node publisher implementing the complete message lifecycle.">Publisher</a> configuration (moved)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The NDEATH payload is prepared during construction and will be sent automatically when the MQTT connection is lost. </dd></dl>

<p class="reference">Referenced by <a class="el" href="#a2d42d4ef522e0dd25c33bb0c6da3954a">~Publisher()</a>.</p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="aff87312f24cdd8f7da406950c47b30c8" name="aff87312f24cdd8f7da406950c47b30c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff87312f24cdd8f7da406950c47b30c8">&#9670;&#160;</a></span>connect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::expected&lt; void, std::string &gt; sparkplug::Publisher::connect </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Connects to the MQTT broker and establishes a Sparkplug B session. </p>
<p>Sets the NDEATH message as the MQTT Last Will Testament before connecting. The NDEATH will be sent automatically if the connection is lost unexpectedly.</p>
<dl class="section return"><dt>Returns</dt><dd>void on success, error message on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Must be called before <a class="el" href="#ab74f5e1e2e561c0b36c84f2084e70189" title="Publishes an NBIRTH (Node Birth) message.">publish_birth()</a>. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The <a class="el" href="classsparkplug_1_1Publisher.html" title="Sparkplug B edge node publisher implementing the complete message lifecycle.">Publisher</a> must remain in scope while connected, or NDEATH may not be delivered properly. </dd></dl>

<p class="reference">References <a class="el" href="#aff87312f24cdd8f7da406950c47b30c8">connect()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#aff87312f24cdd8f7da406950c47b30c8">connect()</a>.</p>

</div>
</div>
<a id="af5288a5b142ac22437df461507a43869" name="af5288a5b142ac22437df461507a43869"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5288a5b142ac22437df461507a43869">&#9670;&#160;</a></span>disconnect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::expected&lt; void, std::string &gt; sparkplug::Publisher::disconnect </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gracefully disconnects from the MQTT broker. </p>
<p>Sends NDEATH via MQTT Last Will Testament and closes the connection.</p>
<dl class="section return"><dt>Returns</dt><dd>void on success, error message on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>After disconnect, you can call <a class="el" href="#aff87312f24cdd8f7da406950c47b30c8" title="Connects to the MQTT broker and establishes a Sparkplug B session.">connect()</a> again to reconnect. </dd></dl>

<p class="reference">References <a class="el" href="#af5288a5b142ac22437df461507a43869">disconnect()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#af5288a5b142ac22437df461507a43869">disconnect()</a>.</p>

</div>
</div>
<a id="a83b86ae882230d92043fe0430744d5ec" name="a83b86ae882230d92043fe0430744d5ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83b86ae882230d92043fe0430744d5ec">&#9670;&#160;</a></span>get_bd_seq()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t sparkplug::Publisher::get_bd_seq </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the current birth/death sequence number. </p>
<dl class="section return"><dt>Returns</dt><dd>Current bdSeq value (increments on each rebirth, never wraps)</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Used by SCADA to detect new sessions/rebirths. </dd></dl>

<p class="definition">Definition at line <a class="el" href="publisher_8hpp_source.html#l00207">207</a> of file <a class="el" href="publisher_8hpp_source.html">publisher.hpp</a>.</p>

</div>
</div>
<a id="a4ca8479c7841eca61b7f472d85421550" name="a4ca8479c7841eca61b7f472d85421550"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ca8479c7841eca61b7f472d85421550">&#9670;&#160;</a></span>get_seq()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t sparkplug::Publisher::get_seq </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the current message sequence number. </p>
<dl class="section return"><dt>Returns</dt><dd>Current sequence number (0-255, wraps at 256)</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Useful for monitoring and debugging. </dd></dl>

<p class="definition">Definition at line <a class="el" href="publisher_8hpp_source.html#l00196">196</a> of file <a class="el" href="publisher_8hpp_source.html">publisher.hpp</a>.</p>

<p class="reference">References <a class="el" href="publisher_8hpp_source.html#l00196">get_seq()</a>.</p>

<p class="reference">Referenced by <a class="el" href="publisher_8hpp_source.html#l00196">get_seq()</a>.</p>

</div>
</div>
<a id="ab74f5e1e2e561c0b36c84f2084e70189" name="ab74f5e1e2e561c0b36c84f2084e70189"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab74f5e1e2e561c0b36c84f2084e70189">&#9670;&#160;</a></span>publish_birth()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::expected&lt; void, std::string &gt; sparkplug::Publisher::publish_birth </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsparkplug_1_1PayloadBuilder.html">PayloadBuilder</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>payload</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Publishes an NBIRTH (Node Birth) message. </p>
<p>The NBIRTH message must be the first message published after <a class="el" href="#aff87312f24cdd8f7da406950c47b30c8" title="Connects to the MQTT broker and establishes a Sparkplug B session.">connect()</a>. It establishes the session and declares all available metrics with their aliases.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">payload</td><td><a class="el" href="classsparkplug_1_1PayloadBuilder.html" title="Type-safe builder for Sparkplug B payloads with automatic type detection.">PayloadBuilder</a> containing metrics with names and aliases</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void on success, error message on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The payload should include:<ul>
<li>All metrics with both name and alias (for NDATA to use aliases)</li>
<li>bdSeq metric (automatically managed if using <a class="el" href="#aff750fe0cc21d2ce83fa72fadac7d974" title="Triggers a rebirth by publishing a new NBIRTH with incremented bdSeq.">rebirth()</a>)</li>
<li>Any metadata or properties</li>
</ul>
</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Must be called after <a class="el" href="#aff87312f24cdd8f7da406950c47b30c8" title="Connects to the MQTT broker and establishes a Sparkplug B session.">connect()</a> and before any <a class="el" href="#a9586b21b626d923791b20c8b3984ef3f" title="Publishes an NDATA (Node Data) message.">publish_data()</a> calls.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#a9586b21b626d923791b20c8b3984ef3f" title="Publishes an NDATA (Node Data) message.">publish_data()</a> for subsequent updates </dd>
<dd>
<a class="el" href="#aff750fe0cc21d2ce83fa72fadac7d974" title="Triggers a rebirth by publishing a new NBIRTH with incremented bdSeq.">rebirth()</a> for publishing a new NBIRTH during runtime </dd></dl>

<p class="reference">References <a class="el" href="#ab74f5e1e2e561c0b36c84f2084e70189">publish_birth()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#ab74f5e1e2e561c0b36c84f2084e70189">publish_birth()</a>.</p>

</div>
</div>
<a id="a9586b21b626d923791b20c8b3984ef3f" name="a9586b21b626d923791b20c8b3984ef3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9586b21b626d923791b20c8b3984ef3f">&#9670;&#160;</a></span>publish_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::expected&lt; void, std::string &gt; sparkplug::Publisher::publish_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsparkplug_1_1PayloadBuilder.html">PayloadBuilder</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>payload</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Publishes an NDATA (Node Data) message. </p>
<p>NDATA messages report metric changes by exception. Only include metrics that have changed since the last NDATA message. Uses aliases for bandwidth efficiency (60-80% reduction vs. full names).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">payload</td><td><a class="el" href="classsparkplug_1_1PayloadBuilder.html" title="Type-safe builder for Sparkplug B payloads with automatic type detection.">PayloadBuilder</a> containing changed metrics (by alias only)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void on success, error message on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Sequence number is automatically incremented (0-255, wraps at 256). </dd>
<dd>
Timestamp is automatically added if not explicitly set.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Must call <a class="el" href="#ab74f5e1e2e561c0b36c84f2084e70189" title="Publishes an NBIRTH (Node Birth) message.">publish_birth()</a> before the first <a class="el" href="#a9586b21b626d923791b20c8b3984ef3f" title="Publishes an NDATA (Node Data) message.">publish_data()</a>.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#ab74f5e1e2e561c0b36c84f2084e70189" title="Publishes an NBIRTH (Node Birth) message.">publish_birth()</a> for establishing aliases </dd></dl>

<p class="reference">References <a class="el" href="#a9586b21b626d923791b20c8b3984ef3f">publish_data()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#a9586b21b626d923791b20c8b3984ef3f">publish_data()</a>.</p>

</div>
</div>
<a id="aa6cf8827815c965085ffe4b93a295be5" name="aa6cf8827815c965085ffe4b93a295be5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6cf8827815c965085ffe4b93a295be5">&#9670;&#160;</a></span>publish_death()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::expected&lt; void, std::string &gt; sparkplug::Publisher::publish_death </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Publishes an NDEATH (Node Death) message. </p>
<p>Explicitly sends the NDEATH message. Usually not needed as NDEATH is sent automatically via MQTT Last Will Testament on disconnect or connection loss.</p>
<dl class="section return"><dt>Returns</dt><dd>void on success, error message on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Prefer using <a class="el" href="#af5288a5b142ac22437df461507a43869" title="Gracefully disconnects from the MQTT broker.">disconnect()</a> which handles NDEATH automatically. </dd></dl>

<p class="reference">References <a class="el" href="#aa6cf8827815c965085ffe4b93a295be5">publish_death()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#aa6cf8827815c965085ffe4b93a295be5">publish_death()</a>.</p>

</div>
</div>
<a id="a86649a7a700810380140581ef5f0bfaa" name="a86649a7a700810380140581ef5f0bfaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86649a7a700810380140581ef5f0bfaa">&#9670;&#160;</a></span>publish_device_birth()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::expected&lt; void, std::string &gt; sparkplug::Publisher::publish_device_birth </td>
          <td>(</td>
          <td class="paramtype">std::string_view</td>          <td class="paramname"><span class="paramname"><em>device_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsparkplug_1_1PayloadBuilder.html">PayloadBuilder</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>payload</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Publishes a DBIRTH (Device Birth) message. </p>
<p>The DBIRTH message declares a device attached to this edge node. It must be published after NBIRTH and declares all device metrics with aliases.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device_id</td><td>The device identifier (e.g., "Sensor01", "Motor02") </td></tr>
    <tr><td class="paramname">payload</td><td><a class="el" href="classsparkplug_1_1PayloadBuilder.html" title="Type-safe builder for Sparkplug B payloads with automatic type detection.">PayloadBuilder</a> containing device metrics with names and aliases</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void on success, error message on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Device sequence starts at 0 for DBIRTH, then increments for DDATA. </dd>
<dd>
Must call <a class="el" href="#ab74f5e1e2e561c0b36c84f2084e70189" title="Publishes an NBIRTH (Node Birth) message.">publish_birth()</a> before publishing any device births.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#a06464584de49d45cdcd2bd61f196481e" title="Publishes a DDATA (Device Data) message.">publish_device_data()</a> for subsequent device updates </dd>
<dd>
<a class="el" href="#a9fdd7b0b127c2512f124132c16df8d44" title="Publishes a DDEATH (Device Death) message.">publish_device_death()</a> for device disconnection </dd></dl>

</div>
</div>
<a id="a5918a8a1d0f6783db3dd8d152579aee2" name="a5918a8a1d0f6783db3dd8d152579aee2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5918a8a1d0f6783db3dd8d152579aee2">&#9670;&#160;</a></span>publish_device_command()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::expected&lt; void, std::string &gt; sparkplug::Publisher::publish_device_command </td>
          <td>(</td>
          <td class="paramtype">std::string_view</td>          <td class="paramname"><span class="paramname"><em>target_edge_node_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string_view</td>          <td class="paramname"><span class="paramname"><em>target_device_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsparkplug_1_1PayloadBuilder.html">PayloadBuilder</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>payload</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Publishes a DCMD (Device Command) message to a device on another edge node. </p>
<p>DCMD messages are commands sent to devices attached to edge nodes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_edge_node_id</td><td>The target edge node identifier </td></tr>
    <tr><td class="paramname">target_device_id</td><td>The target device identifier </td></tr>
    <tr><td class="paramname">payload</td><td><a class="el" href="classsparkplug_1_1PayloadBuilder.html" title="Type-safe builder for Sparkplug B payloads with automatic type detection.">PayloadBuilder</a> containing command metrics</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void on success, error message on failure</dd></dl>
<dl class="section user"><dt>Example Usage</dt><dd><div class="fragment"><div class="line"><a class="code hl_class" href="classsparkplug_1_1PayloadBuilder.html">sparkplug::PayloadBuilder</a> cmd;</div>
<div class="line">cmd.<a class="code hl_function" href="classsparkplug_1_1PayloadBuilder.html#a4d639467ba8b3b2bf80aaac66a032a56">add_metric</a>(<span class="stringliteral">&quot;SetPoint&quot;</span>, 75.0);</div>
<div class="line">publisher.publish_device_command(<span class="stringliteral">&quot;Gateway01&quot;</span>, <span class="stringliteral">&quot;Motor01&quot;</span>, cmd);</div>
<div class="ttc" id="aclasssparkplug_1_1PayloadBuilder_html_a4d639467ba8b3b2bf80aaac66a032a56"><div class="ttname"><a href="classsparkplug_1_1PayloadBuilder.html#a4d639467ba8b3b2bf80aaac66a032a56">sparkplug::PayloadBuilder::add_metric</a></div><div class="ttdeci">PayloadBuilder &amp; add_metric(std::string_view name, T &amp;&amp;value)</div><div class="ttdoc">Adds a metric by name only (for NBIRTH without aliases).</div><div class="ttdef"><b>Definition</b> <a href="payload__builder_8hpp_source.html#l00155">payload_builder.hpp:155</a></div></div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a06464584de49d45cdcd2bd61f196481e" name="a06464584de49d45cdcd2bd61f196481e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06464584de49d45cdcd2bd61f196481e">&#9670;&#160;</a></span>publish_device_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::expected&lt; void, std::string &gt; sparkplug::Publisher::publish_device_data </td>
          <td>(</td>
          <td class="paramtype">std::string_view</td>          <td class="paramname"><span class="paramname"><em>device_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsparkplug_1_1PayloadBuilder.html">PayloadBuilder</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>payload</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Publishes a DDATA (Device Data) message. </p>
<p>DDATA messages report device metric changes by exception. Only include metrics that have changed since the last DDATA message. Uses aliases for bandwidth efficiency.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device_id</td><td>The device identifier </td></tr>
    <tr><td class="paramname">payload</td><td><a class="el" href="classsparkplug_1_1PayloadBuilder.html" title="Type-safe builder for Sparkplug B payloads with automatic type detection.">PayloadBuilder</a> containing changed metrics (by alias only)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void on success, error message on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Sequence number is automatically incremented per device (0-255, wraps at 256). </dd>
<dd>
Must call <a class="el" href="#a86649a7a700810380140581ef5f0bfaa" title="Publishes a DBIRTH (Device Birth) message.">publish_device_birth()</a> before the first <a class="el" href="#a06464584de49d45cdcd2bd61f196481e" title="Publishes a DDATA (Device Data) message.">publish_device_data()</a>.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="#a86649a7a700810380140581ef5f0bfaa" title="Publishes a DBIRTH (Device Birth) message.">publish_device_birth()</a> for establishing aliases </dd></dl>

</div>
</div>
<a id="a9fdd7b0b127c2512f124132c16df8d44" name="a9fdd7b0b127c2512f124132c16df8d44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fdd7b0b127c2512f124132c16df8d44">&#9670;&#160;</a></span>publish_device_death()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::expected&lt; void, std::string &gt; sparkplug::Publisher::publish_device_death </td>
          <td>(</td>
          <td class="paramtype">std::string_view</td>          <td class="paramname"><span class="paramname"><em>device_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Publishes a DDEATH (Device Death) message. </p>
<p>Explicitly sends a device death message to indicate device disconnection.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device_id</td><td>The device identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void on success, error message on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>After DDEATH, <a class="el" href="#a86649a7a700810380140581ef5f0bfaa" title="Publishes a DBIRTH (Device Birth) message.">publish_device_birth()</a> must be called again before DDATA. </dd></dl>

</div>
</div>
<a id="ae7a38f82822231d5b997c6e238882f75" name="ae7a38f82822231d5b997c6e238882f75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7a38f82822231d5b997c6e238882f75">&#9670;&#160;</a></span>publish_node_command()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::expected&lt; void, std::string &gt; sparkplug::Publisher::publish_node_command </td>
          <td>(</td>
          <td class="paramtype">std::string_view</td>          <td class="paramname"><span class="paramname"><em>target_edge_node_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsparkplug_1_1PayloadBuilder.html">PayloadBuilder</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>payload</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Publishes an NCMD (Node Command) message to another edge node. </p>
<p>NCMD messages are commands sent from SCADA/Primary Applications or other edge nodes to request actions like rebirth, reboot, or custom operations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_edge_node_id</td><td>The target edge node identifier </td></tr>
    <tr><td class="paramname">payload</td><td><a class="el" href="classsparkplug_1_1PayloadBuilder.html" title="Type-safe builder for Sparkplug B payloads with automatic type detection.">PayloadBuilder</a> containing command metrics (e.g., "Node Control/Rebirth")</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void on success, error message on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Common Node Control commands:<ul>
<li>"Node Control/Rebirth" (bool): Request node to republish NBIRTH</li>
<li>"Node Control/Reboot" (bool): Request node to reboot</li>
<li>"Node Control/Next Server" (bool): Switch to backup server</li>
<li>"Node Control/Scan Rate" (int64): Change data acquisition rate</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Example Usage</dt><dd><div class="fragment"><div class="line"><a class="code hl_class" href="classsparkplug_1_1PayloadBuilder.html">sparkplug::PayloadBuilder</a> cmd;</div>
<div class="line">cmd.<a class="code hl_function" href="classsparkplug_1_1PayloadBuilder.html#a4d639467ba8b3b2bf80aaac66a032a56">add_metric</a>(<span class="stringliteral">&quot;Node Control/Rebirth&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line">publisher.publish_node_command(<span class="stringliteral">&quot;Gateway01&quot;</span>, cmd);</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="aff750fe0cc21d2ce83fa72fadac7d974" name="aff750fe0cc21d2ce83fa72fadac7d974"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff750fe0cc21d2ce83fa72fadac7d974">&#9670;&#160;</a></span>rebirth()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::expected&lt; void, std::string &gt; sparkplug::Publisher::rebirth </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel nodiscard">nodiscard</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Triggers a rebirth by publishing a new NBIRTH with incremented bdSeq. </p>
<p>Rebirth is used when:</p><ul>
<li>SCADA/Primary Application requests it via NCMD/Rebirth</li>
<li>New metrics need to be added to the metric inventory</li>
<li>Edge node configuration changes</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd>void on success, error message on failure</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Automatically increments bdSeq and resets sequence number to 0. </dd>
<dd>
Republishes the last NBIRTH payload with updated bdSeq.</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>The new NBIRTH should contain ALL metrics (old + new), not just additions. </dd></dl>

<p class="reference">References <a class="el" href="#aff750fe0cc21d2ce83fa72fadac7d974">rebirth()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#aff750fe0cc21d2ce83fa72fadac7d974">rebirth()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/sparkplug/<a class="el" href="publisher_8hpp_source.html">publisher.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>sparkplug</b></li><li class="navelem"><a href="classsparkplug_1_1Publisher.html">Publisher</a></li>
    <li class="footer">Generated on <span class="timestamp"></span> for Sparkplug B C++ Library by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
